{"version":3,"sources":["webpack:///./components/services.js","webpack:///./index.js"],"names":["refs","filmContainer","document","querySelector","form","next","previous","output","img","querySelectorAll","input","favs","li","filmName","arr","getFilmName","value","this","nextFilms","page","fetch","then","response","json","data","console","log","draw","results","param","films","map","film","id","title","poster_path","join","innerHTML","searchNewFilms","query","number","defaultFilms","showModal","push","localStorage","setItem","JSON","stringify","filmData","filmTitle","filmDescription","overview","filmImg","filmRating","vote_average","Swal","fire","text","imageUrl","imageWidth","imageHeight","imageAlt","nextPage","prevPage","services","addEventListener","e","preventDefault","target","elements","nodeName","closest"],"mappings":"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","file":"main.6e75bc90a3476d76fb93.js","sourcesContent":["export default {\r\n  refs: {\r\n    filmContainer: document.querySelector('.filmContainer'),\r\n    form: document.querySelector('.form'),\r\n    next: document.querySelector('.next'),\r\n    previous: document.querySelector('.previous'),\r\n    output: document.querySelector('.output'),\r\n    img: document.querySelectorAll('.list-item__image'),\r\n    input: document.querySelector('.input'),\r\n    favs: document.querySelector('.favorite'),\r\n    li: document.querySelector('.li'),\r\n  },\r\n\r\n  // isLibrary: false,\r\n  // isWatched: false,\r\n  // isQueu: false,\r\n\r\n  filmName: '',\r\n\r\n  arr: [],\r\n\r\n  getFilmName(value){\r\n    this.filmName = value\r\n  },\r\n\r\n  nextFilms(page){\r\n    fetch(\r\n      `https://api.themoviedb.org/3/search/movie/?api_key=4aa539255aa0c2506cf45806a15a8a0a&language=en-US&query=${this.filmName}&page=${page}`,\r\n    )\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        console.log(data);\r\n        this.draw(data.results);\r\n      });\r\n  },\r\n\r\n  draw(param) {\r\n    console.log('param', param);\r\n    const films = param\r\n      .map(\r\n        film =>\r\n          `<li class=\"li\" id=\"${film.id}\"><h2 class=\"title\">${film.title}</h2><img src=\"https://image.tmdb.org/t/p/w500/${film.poster_path}\"></li>`,\r\n      )\r\n      .join(' ');\r\n    // console.log('films :', films);\r\n    this.refs.filmContainer.innerHTML = films;\r\n  },\r\n  searchNewFilms(query) {\r\n    // console.log(query)\r\n    fetch(\r\n      `https://api.themoviedb.org/3/search/movie/?api_key=4aa539255aa0c2506cf45806a15a8a0a&language=en-US&query=${query}`,\r\n    )\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        console.log(data);\r\n        this.draw(data.results);\r\n      });\r\n  },\r\n\r\n  number: 1,\r\n  defaultFilms() {\r\n    fetch(\r\n      `https://api.themoviedb.org/3/movie/popular?api_key=4aa539255aa0c2506cf45806a15a8a0a&language=en-US&page=${this.number}`,\r\n    )\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        console.log(data);\r\n        this.draw(data.results);\r\n      });\r\n  },\r\n\r\n  showModal(id) {\r\n    fetch(\r\n      `https://api.themoviedb.org/3/movie/${id}?api_key=e9f6322f77334e3f0406d6b8eabd79ce`,\r\n    )\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        this.arr.push(data)\r\n        localStorage.setItem('data', JSON.stringify(this.arr))\r\n        const filmData = {\r\n          filmTitle: data.title,\r\n          filmDescription: data.overview,\r\n          filmImg: data.poster_path,\r\n          filmRating: data.vote_average,\r\n        };\r\n        console.log(filmData.filmImg);\r\n        Swal.fire({\r\n          title: filmData.filmTitle,\r\n          text: filmData.filmDescription,\r\n          imageUrl: `https://image.tmdb.org/t/p/w300/${filmData.filmImg}`,\r\n          imageWidth: 300,\r\n          imageHeight: 300,\r\n          imageAlt: `${filmData.filmTitle} image`,\r\n        }).then(data => {\r\n          Swal.fire('Done!', 'Added to favorites!', 'success');\r\n        });\r\n        console.log(filmData);\r\n      });\r\n  },\r\n\r\n  nextPage() {\r\n    this.number += 1;\r\n    this.nextFilms(this.number)\r\n  },\r\n  prevPage() {\r\n    this.number -= 1;\r\n  },\r\n};\r\n","import './styles.css';\r\nimport services from './components/services'\r\n\r\n// let ammount = 1;\r\n\r\nservices.defaultFilms()\r\n\r\nconst handleSubmit = e => {\r\n    e.preventDefault()\r\n    const query = e.target.elements[0].value\r\n    services.getFilmName(query)\r\n    services.searchNewFilms(query)\r\n    if(query !== ''){\r\n        services.searchNewFilms(query)\r\n    } else if(query === ''){\r\n        services.defaultFilms()\r\n    } \r\n}\r\n\r\nservices.refs.form.addEventListener('submit', handleSubmit)\r\n\r\n\r\n\r\n// services.favoriteFilms()\r\nconst nextPageB = e => {\r\n    e.preventDefault()\r\n    services.nextPage()\r\n    services.defaultFilms()\r\n}\r\n\r\nconst previousPageB = e => {\r\n    e.preventDefault()\r\n    services.prevPage()\r\n    services.defaultFilms()\r\n}\r\n\r\nservices.refs.next.addEventListener('click', nextPageB)\r\nservices.refs.previous.addEventListener('click', previousPageB)\r\n\r\n// const showFavs = e => {\r\n//     e.preventDefault()\r\n//     services.favFilms()\r\n// }\r\n\r\nconst showLi = e => {\r\n    if (e.target.nodeName !== 'IMG') {\r\n        return\r\n      }\r\n    const id = e.target.closest('li').id\r\n    services.showModal(id)\r\n\r\n}\r\n\r\n\r\n\r\nservices.refs.filmContainer.addEventListener('click', showLi)   \r\n// services.refs.favs.addEventListener('click', showFavs)"],"sourceRoot":""}